bootstrap: docker
from: ubuntu:24.04

%post
    set -e
    export DEBIAN_FRONTEND=noninteractive

    echo "deb http://archive.ubuntu.com/ubuntu noble universe" >> /etc/apt/sources.list
    apt-get update

    apt-get install -y python3-dev python3-pip python3-full swig git

    python3 -m venv /venv
    . /venv/bin/activate

    # Install hockey environment
    pip install "hockey @ git+https://git@github.com/martius-lab/hockey-env.git"

    # Install core dependencies
    pip install matplotlib numpy box2d-py pygame gymnasium tensorboardx notebook jupyterlab ipympl torch torchvision torchaudio tqdm wandb

    # Install setuptools for package installation
    pip install setuptools wheel

    # Note: The rl_hockey package will be installed at runtime from the mounted project directory
    # This allows you to update code without rebuilding the container
    # Installation command: pip install -e /path/to/RL_CheungMaenzerAbraham_Hockey

    # cleanup
    apt-get clean
    pip cache purge


%runscript
    . /venv/bin/activate
    "$@"






